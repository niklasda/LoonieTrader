<Window x:Class="LoonieTrader.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        xmlns:viewModels="clr-namespace:LoonieTrader.App.ViewModels"
        xmlns:converters="clr-namespace:LoonieTrader.App.ViewModels.Converters"
        DataContext="{Binding Source={StaticResource Locator}, Path=Main}"
        Title="LoonieTrader"
        ResizeMode="CanResizeWithGrip"
        Height="700" MinHeight="600"
        Width="1080" MinWidth="960"
        Icon="/LoonieTrader.App;component/Images/AppBitmap.bmp" Closing="Window_Closing">
    <Window.InputBindings>
        <KeyBinding Key="M" Modifiers="Control" Command="{Binding MarketOrderCommand}"/>
        <KeyBinding Key="O" Modifiers="Control" Command="{Binding CompositeOrderCommand}"/>
        <KeyBinding Key="I" Modifiers="Control" Command="{Binding WorkbenchCommand}"/>
        <KeyBinding Key="H" Modifiers="Control" Command="{Binding NewChartCommand}"/>
        <KeyBinding Key="D1" Modifiers="Control" Command="{Binding InstrumentInformationCommand}"/>
        <KeyBinding Key="D2" Modifiers="Control" Command="{Binding AccountInformationCommand}"/>
        <KeyBinding Key="D3" Modifiers="Control" Command="{Binding TransactionHistoryCommand}"/>
        <KeyBinding Key="D4" Modifiers="Control" Command="{Binding OpenOrdersCommand}"/>
        <KeyBinding Key="D5" Modifiers="Control" Command="{Binding OpenPositionsCommand}"/>
        <KeyBinding Key="F1" Modifiers="Control" Command="{Binding AboutCommand}"/>
    </Window.InputBindings>
    <DockPanel LastChildFill="True">
        <syncfusion:MenuAdv DockPanel.Dock="Top">
            <syncfusion:MenuItemAdv Header="_File" >
                <syncfusion:MenuItemAdv Header="_Settings" Command="{Binding SettingsCommand}" ></syncfusion:MenuItemAdv>
                <syncfusion:MenuItemSeparator />
                <syncfusion:MenuItemAdv Header="_Log Out" Command="{Binding LogOutCommand}"></syncfusion:MenuItemAdv>
                <syncfusion:MenuItemSeparator />
                <syncfusion:MenuItemAdv Header="E_xit" InputGestureText="Alt+F4" Command="{Binding ExitApplicationCommand}" />
            </syncfusion:MenuItemAdv>
            <syncfusion:MenuItemAdv Header="_View" >
                <syncfusion:MenuItemAdv Header="Instrument Information" Command="{Binding InstrumentInformationCommand}" InputGestureText="Ctrl+1" />
                <syncfusion:MenuItemAdv Header="Account Information" Command="{Binding AccountInformationCommand}" InputGestureText="Ctrl+2" />
                <syncfusion:MenuItemAdv Header="Transaction History" Command="{Binding TransactionHistoryCommand}" InputGestureText="Ctrl+3" />
                <syncfusion:MenuItemAdv Header="Open Orders" Command="{Binding OpenOrdersCommand}" InputGestureText="Ctrl+4" />
                <syncfusion:MenuItemAdv Header="Open Positions" Command="{Binding OpenPositionsCommand}" InputGestureText="Ctrl+5" />
            </syncfusion:MenuItemAdv>
            <syncfusion:MenuItemAdv Header="_Windows" >
                <syncfusion:MenuItemAdv Header="_Market Order" Command="{Binding MarketOrderCommand}" InputGestureText="Ctrl+M" />
                <syncfusion:MenuItemAdv Header="Complex _Order" Command="{Binding CompositeOrderCommand}" InputGestureText="Ctrl+O" />
                <syncfusion:MenuItemAdv Header="C_hart" Command="{Binding NewChartCommand}" InputGestureText="Ctrl+H" />
                <syncfusion:MenuItemAdv Header="_Indicator Workbench" Command="{Binding WorkbenchCommand}" InputGestureText="Ctrl+I" />
            </syncfusion:MenuItemAdv>
            <syncfusion:MenuItemAdv Header="_Help" >
                <syncfusion:MenuItemAdv Header="_Log" Command="{Binding LogCommand}" />
                <syncfusion:MenuItemSeparator />
                <syncfusion:MenuItemAdv Header="_About" Command="{Binding AboutCommand}"  InputGestureText="F1"/>
            </syncfusion:MenuItemAdv>
        </syncfusion:MenuAdv>
        <StatusBar  DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock>Hello Statusbar</TextBlock>
            </StatusBarItem>
            <StatusBarItem Margin="20,0">
                <TextBlock>with connection info</TextBlock>
            </StatusBarItem>
        </StatusBar>

        <Grid   >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="170"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0">
                <Grid Grid.Row="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <syncfusion:TreeViewAdv Grid.Row="0" ItemsSource="{Binding AllInstrumentTypes, Mode=OneWay}" AllowDragDrop="False" 
                                            SelectedTreeItem="{Binding SelectedInstrument}" MouseDoubleClick="Control_OnMouseDoubleClick" >

                        <syncfusion:TreeViewAdv.Resources>

                            <converters:InstrumentTypeConverter x:Key="HierarchicalConverter" />

                            <HierarchicalDataTemplate DataType="{x:Type viewModels:InstrumentTypeViewModel}">
                                <HierarchicalDataTemplate.ItemsSource>
                                    <MultiBinding Converter="{StaticResource HierarchicalConverter}">
                                        <Binding Path="Instruments" />
                                    </MultiBinding>
                                </HierarchicalDataTemplate.ItemsSource>

                                <TextBlock Text="{Binding Path=Type,Mode=OneWay}" Margin="2" FontWeight="Bold"/>
                            </HierarchicalDataTemplate>

                            <HierarchicalDataTemplate DataType="{x:Type viewModels:InstrumentViewModel}" >
                                <TextBlock Text="{Binding Path=DisplayName}" Margin="2" />
                            </HierarchicalDataTemplate>
                        </syncfusion:TreeViewAdv.Resources>
                    </syncfusion:TreeViewAdv>
                </Grid>
            </Grid>
            <GridSplitter Grid.Column="1" Width="7" ResizeDirection="Columns" HorizontalAlignment="Stretch" ></GridSplitter>


            <Grid  Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="180"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>
                <syncfusion:TabControlExt Grid.Row="0" FlowDirection="RightToLeft" AllowDragDrop="False" SelectedIndex="{Binding SelectedTabIndex}" CloseButtonType="Hide" EnableLabelEdit="False" ShowTabListContextMenu="False" ShowTabItemContextMenu="False" >
                    <syncfusion:TabItemExt Header="Open Positions" FlowDirection="LeftToRight">
                        <syncfusion:SfDataGrid AutoGenerateColumns="True" ItemsSource="{Binding AllPositions}" FlowDirection="LeftToRight" ColumnSizer="Auto" SelectedItem="{Binding SelectedPosition}" >
                            <syncfusion:SfDataGrid.RecordContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="Close Position..." DataContext="{Binding Source={StaticResource Locator}, Path=Main }" Command="{Binding ClosePositionContextCommand}" />

                                </ContextMenu>
                            </syncfusion:SfDataGrid.RecordContextMenu>
                        </syncfusion:SfDataGrid>
                    </syncfusion:TabItemExt>
                    <syncfusion:TabItemExt Header="Open Orders" FlowDirection="LeftToRight">
                        <syncfusion:SfDataGrid AutoGenerateColumns="True" ItemsSource="{Binding AllOrders}" FlowDirection="LeftToRight" ColumnSizer="Auto"  SelectedItem="{Binding SelectedOrder}">
                            <syncfusion:SfDataGrid.RecordContextMenu>
                                <ContextMenu >
                                    <MenuItem Header="Cancel Order..." DataContext="{Binding Source={StaticResource Locator}, Path=Main }" Command="{Binding CancelOrderContextCommand}" />
                                    <MenuItem Header="Modify Order..." DataContext="{Binding Source={StaticResource Locator}, Path=Main }" Command="{Binding CancelOrderContextCommand}" />

                                </ContextMenu>
                            </syncfusion:SfDataGrid.RecordContextMenu>
                        </syncfusion:SfDataGrid>
                    </syncfusion:TabItemExt>
                    <syncfusion:TabItemExt Header="Transaction History" FlowDirection="LeftToRight">
                        <syncfusion:SfDataGrid AutoGenerateColumns="True" ItemsSource="{Binding AllTransactions}" FlowDirection="LeftToRight" ColumnSizer="Auto" />
                    </syncfusion:TabItemExt>
                    <syncfusion:TabItemExt Header="Account Information" FlowDirection="LeftToRight">
                        <syncfusion:PropertyGrid SelectedObject="{Binding AccountSummary}" FlowDirection="LeftToRight" />
                    </syncfusion:TabItemExt>
                    <syncfusion:TabItemExt Header="Instrument Information" FlowDirection="LeftToRight">
                        <syncfusion:PropertyGrid SelectedObject="{Binding SelectedInstrument}" FlowDirection="LeftToRight" SearchBoxVisibility="Collapsed" ButtonPanelVisibility="Collapsed"  />
                    </syncfusion:TabItemExt>
                </syncfusion:TabControlExt>
                <GridSplitter Grid.Row="1"  Height="5" ResizeDirection="Rows" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ></GridSplitter>
                <Grid Grid.Row="2" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="46"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal">

                        <syncfusion:ComboBoxAdv ItemsSource="{Binding AvailableChartTypes}" AllowMultiSelect="False" DefaultText="Chart Type"
                            syncfusion:ComboBoxAdvSelectionChangedCommand.Command="{Binding ChartTypeCommand}"
                            syncfusion:ComboBoxAdvSelectionChangedCommand.CommandParameter="{Binding Path=SelectedItems,RelativeSource={RelativeSource Self}}" />

                        <syncfusion:ComboBoxAdv ItemsSource="{Binding AvailableTimeframes}" AllowMultiSelect="True" DefaultText="Timeframe"
                            syncfusion:ComboBoxAdvSelectionChangedCommand.Command="{Binding TimeframesChangedCommand}"
                            syncfusion:ComboBoxAdvSelectionChangedCommand.CommandParameter="{Binding Path=SelectedItems,RelativeSource={RelativeSource Self}}" />

                        <syncfusion:ComboBoxAdv ItemsSource="{Binding AvailableIndicators}" AllowMultiSelect="True" DefaultText="Indicators" SelectedItems="{Binding SelectedIndicators}"
                            syncfusion:ComboBoxAdvSelectionChangedCommand.Command="{Binding IndicatorsChangedCommand}"
                            syncfusion:ComboBoxAdvSelectionChangedCommand.CommandParameter="{Binding Path=SelectedItems,RelativeSource={RelativeSource Self}}" />

                        <syncfusion:ButtonAdv Label="_Market Order..." Margin="30,0,0,0" Command="{Binding MarketOrderCommand}" SmallIcon="/LoonieTrader.App;component/Images/Stcok-Exchange-03-WF.png" FontSize="14" IconHeight="26" IconWidth="26" />
                        <syncfusion:ButtonAdv Label="Complex _Order..." Command="{Binding CompositeOrderCommand}" SmallIcon="/LoonieTrader.App;component/Images/Stcok-Exchange-03-WF.png" FontSize="14" IconHeight="26" IconWidth="26" />
                        <syncfusion:ButtonAdv Label="New C_hart Window..." Command="{Binding NewChartCommand}" SmallIcon="/LoonieTrader.App;component/Images/Cursor-02-WF.png" FontSize="14" IconHeight="26" IconWidth="26"/>

                        <syncfusion:ButtonAdv Label="Reload..." Margin="30,0,0,0" Command="{Binding ReloadChartCommand}" />

                    </StackPanel>

                    <syncfusion:SfChart Grid.Row="1" x:Name="MainChart" Header="{Binding CurrencyCode}" BorderBrush="Gainsboro" BorderThickness="1" DataContext="{Binding ChartModel}">
                        <syncfusion:SfChart.Legend>
                            <syncfusion:ChartLegend CheckBoxVisibility="Visible" />
                        </syncfusion:SfChart.Legend>

                        <syncfusion:SfChart.Behaviors>
                            <syncfusion:ChartSelectionBehavior SelectionStyle="Single" EnableSegmentSelection="True"/>
                        </syncfusion:SfChart.Behaviors>

                        <syncfusion:SfChart.PrimaryAxis >
                            <syncfusion:CategoryAxis Header="Time" ZoomFactor="1.0" ZoomPosition="1" EnableAutoIntervalOnZooming="True"/>
                        </syncfusion:SfChart.PrimaryAxis>

                        <syncfusion:SfChart.SecondaryAxis>
                            <syncfusion:NumericalAxis StartRangeFromZero="False" Header="Price"  />
                        </syncfusion:SfChart.SecondaryAxis>

                        <syncfusion:CandleSeries ListenPropertyChange="True" Label="{Binding CurrencyCode}" ItemsSource="{Binding GraphData}"
                                                 XBindingPath="Date"   High="High" Open="Open" Close="Close" Low="Low" >
                        </syncfusion:CandleSeries>
                    </syncfusion:SfChart>
                </Grid>
            </Grid>
        </Grid>



    </DockPanel>
</Window>































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































